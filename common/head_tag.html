<!-- SYSTEM JAVASCRIPT - DO NOT EDIT -->
    <script type="text/javascript" nonce="{{nonce}}">
    //Remove form spinner after form is loaded
    function removeFormSpinner() {
		let spinner = document.querySelector('form.marketo-form .spinner-wrapper');
		if(spinner){ 
			document.querySelector('form.marketo-form').removeChild(spinner);
		}
	}
	    
	    
    var profiling = {
      isEnabled: false,
      numberOfProfilingFields: 3,
      alwaysShowFields: [ 'mktDummyEntry']
    };
    var mktFormLanguage = 'English'
    </script>
    
    <!-- Created Theme component to add Download form in Discourse [By Webdirekt on 02-11-2020] -->
    <script type="text/discourse-plugin" version="0.8">
    const { h } = require('virtual-dom');
    const DiscourseURL = require('discourse/lib/url').default;    
        
	
    /* Below code will render "download_form" widget before rendering "post-menu" widget on Topic page*/
    api.decorateWidget("post-menu:before", helper => {
      const path = window.location.pathname;
      //Required javascripts for the download form   
      const forms2MinJsUrl = "https://info.softwareag.com/js/forms2/js/forms2.min.js";
      const munchkinJsUrl = "https://munchkin.marketo.net/munchkin.js";
      const mktFormSupportJsUrl = "https://info.softwareag.com/js/mktFormSupport.js";
      
      let marketoFormId = null;
      if(/^\/t\/webmethods-free-trial-download\//.test(path)){
          marketoFormId = "mktoForm_12281";
      } 
      else if(/^\/t\/adabas-and-natural-for-docker-download-form\//.test(path)){
          marketoFormId = "mktoForm_12282";
      }
      else if(/^\/t\/webmethods-service-designer-download-form\//.test(path)){
          marketoFormId = "mktoForm_8655";
      }
      else if(/^\/t\/webmethods-io-connector-builder-download-form\//.test(path)){
          marketoFormId = "mktoForm_12313";
      }
      else{
	    //Do nothing
      }
      
      if (helper.attrs.firstPost && marketoFormId) {
      		//If required Downlaod form javascript is not present then include it dynalically in the head tag. 
      		let forms2MinJs = document.querySelector('head script[src="' + forms2MinJsUrl + '"]');
		if(!forms2MinJs) {
			forms2MinJs = document.createElement("script");
			let munchkinJs = document.createElement("script");
			let mktFormSupportJs = document.createElement("script");

			forms2MinJs.src = forms2MinJsUrl;	
			forms2MinJs.setAttribute("nonce", "");
			document.head.appendChild(forms2MinJs);

			munchkinJs.src = munchkinJsUrl;
			munchkinJs.setAttribute("nonce", "");
			document.head.appendChild(munchkinJs);

			mktFormSupportJs.src = mktFormSupportJsUrl;
			mktFormSupportJs.setAttribute("nonce", "");
			document.head.appendChild(mktFormSupportJs);

		}
      		helper.attrs.forms2MinJs = forms2MinJs;
      
          helper.attrs.marketoFormId = marketoFormId;
          //Rendering download form based on the current topic.
          return helper.attach("download_form", helper.attrs); 
      } 
     
    }); 
    
    function checkNull(value){
            if(typeof(value) != "undefined" && value != null && value !='null'){
                return value;
            } 
            return "";
        }
    
    /* Created new download_form widget which will display only if current URL contains  "/t/webmethods-free-trial/" */
    api.createWidget("download_form", {
        tagName: "div.d-form",
        buildKey: () => "download_form",
        html(attrs) {
    
            let userFields = this.site.get("user_fields");
            let result = [];
            const path = window.location.pathname;
		
            if(true) {
                //Comment the below code to change the way for getting Username as latest versions of Discourse do not have support for the "Discourse.User.currentPro". [Modified by: Saurabh; Date: 14-10-2021]
                //var currentusername = Discourse.User.currentProp('username'); 
                var currentuser = api.getCurrentUser(); 
                var currentusername;
                if(currentuser){
                    currentusername = currentuser.username;
                }
                if (currentusername  && typeof currentusername !== 'undefined'){
                    var fulllinktojson = "/users/" + currentusername + ".json"; 
                    
                    $.ajax({
                        type: 'GET',
                        url: fulllinktojson,
                        dataType: 'json',
                        success: function(json) {
                            //List if banned countries
                            let bannedCountries = ["Afghanistan","Algeria","Angola","Armenia","Azerbaijan","Belarus","Birma/Myanmar","Burundi","Cambodia","Central African Republic","China","Congo","Cyprus","Democratic Rep. Of Congo","Egypt","Eritrea","Ethiopia","Georgia","Guinea","Guinea-Bissau","Haiti","Iraq","Israel","Jordan","Kazakhstan","Kyrgyzstan","Laos","Lebanon","Libya","Macau","Mali","Moldova","Mongolia","Mozambique","Myanmar","Nigeria","Pakistan","Russia","Russian federation","Somalia","South Sudan","Sri Lanka","Tajikistan","Tanzania","Tunisia","Turkmenistan","Uganda","Ukraine","Uzbekistan","Venezuela","Vietnam","Yemen","Zimbabwe"];
                            
                            let isBelongsToBannedCountry = false;
                            let isBelongsToDownloadsGroup = false;
                            
                            //Getting user-fields id to fetch user-fields of the current data
                            let countryFieldObj = userFields.find(obj => obj.name.toLowerCase() == ("Country").toLowerCase());
                            let stateFieldObj = userFields.find(obj => obj.name.toLowerCase() == ("State").toLowerCase());
                            let provinceFieldObj = userFields.find(obj => obj.name.toLowerCase() == ("Province").toLowerCase());
                            let firstnameFieldObj = userFields.find(obj => obj.name.toLowerCase() == ("First name").toLowerCase());
                            let lastnameFieldObj = userFields.find(obj => obj.name.toLowerCase() == ("Last name").toLowerCase());
                            let companyFieldObj = userFields.find(obj => obj.name.toLowerCase() == ("Company").toLowerCase());
                            let jobTitleFieldObj = userFields.find(obj => obj.name.toLowerCase() == ("Job Title").toLowerCase());

                            
                            /*
                            ** Getting Current Login User Deatils.
                            */
                            //Email
                            var currentuserEmail = String(json.user.email);
                            //First Name
                            var currentuserFirstName = "";
                            if(firstnameFieldObj){ currentuserFirstName = checkNull(String(json.user.user_fields[firstnameFieldObj.id])); }
                            //Last Name
                            var currentuserLastName = ""
                            if(lastnameFieldObj){ currentuserLastName = checkNull(String(json.user.user_fields[lastnameFieldObj.id])); }
                            //Job Title
                            var currentuserJob = "";
                            if(jobTitleFieldObj){ currentuserJob = checkNull(String(json.user.user_fields[jobTitleFieldObj.id])); }
                            //Country
                            var currentuserCountry = "";
                            if(countryFieldObj){ currentuserCountry = checkNull(String(json.user.user_fields[countryFieldObj.id])); }
                            //Company
                            var currentuserCompany = "";
                            if(companyFieldObj){ currentuserCompany = checkNull(String(json.user.user_fields[companyFieldObj.id])); }
                            // State
                            var currentuserState = "";
                            if(stateFieldObj){ currentuserState = checkNull(String(json.user.user_fields[stateFieldObj.id])); }
                            // Province
                            var currentuserProvince = "";
                            if(provinceFieldObj){ currentuserProvince = checkNull(String(json.user.user_fields[provinceFieldObj.id])); }
                            
                            //Groups
                            var currentuserGroups = [];
                            (json.user.groups).forEach(function (groupObj, index) {
                                currentuserGroups.push(String(groupObj.name).toLowerCase());
                            });
                            
                            //check whether user belongs to banned country
                            var lowerCaseBannedCountries = bannedCountries.map(function(value) {
                            return value.toLowerCase();
                            });
                            if(lowerCaseBannedCountries.indexOf(currentuserCountry.toLowerCase()) !== -1){
                                isBelongsToBannedCountry = true;    
                            }
                            
                            //check whether user belongs to Downloads group
                            if(currentuserGroups.indexOf(("Downloads").toLowerCase()) !== -1){
                                isBelongsToDownloadsGroup = true;    
                            }
                            
                            //If user belongs to Banned Country and not present in Downlads group
                            if(isBelongsToBannedCountry && !isBelongsToDownloadsGroup){
                                DiscourseURL.routeToUrl('/g/Downloads');
                            }
                            // Else Display Download Form.
                            else{
                                //Generating HTML Form with input fields and button.
                                if(!window.MktoForms2) { 
                                //If Marketo script is not loaded then render form along with spinner.	
                                                    result.push(h('form.marketo-form.mktoForm.mktoHasWidth.mktoLayoutLeft',{"attributes":{
                                                    "method": "post",
                                                    "enctype": "application/x-www-form-urlencoded",
                                                    "id": attrs.marketoFormId,
                                                    "name": attrs.marketoFormId
                                    }}, h('div.spinner-wrapper',{"attributes":{"style":"display:flex; justify-content:center; padding:0.5em"}}, h('span.spinner', ""))));

                                }else{
                                    result.push(h('form.marketo-form.mktoForm.mktoHasWidth.mktoLayoutLeft',{"attributes":{
                                                    "method": "post",
                                                    "enctype": "application/x-www-form-urlencoded",
                                                    "id": attrs.marketoFormId,
                                                    "name": attrs.marketoFormId
                                    }}));

                                }

                                try {
                                    
                                    //List of Displayed fields with key value pair.
                                    let displayFields = {};
                                    //List of Hidden fields with key value pair. 
                                    let hiddenFields = {};
                                    
                                    //List of Countries
                                    let countryOptions = ["Select Country","Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Cook Islands","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Cote d&#039;Ivoire","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji Islands","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenad","Guadeloupe","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island and McDonald Islands","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao S.A.R.","China","China","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","North Korea","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territory","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Helena","Saint Kitts","Saint Lucia","Saint Pierre and Miquelon","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabi","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","Spain","Sri Lanka","Sudan","Suriname","Svalbard and Jan Mayen","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","U.S. Virgin Islands","Uganda","Ukraine","United Arab Emirates","United Kingdom","USA","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Vatican","Venezuela","Vietnam","Wallis and Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"];
                                    //Modified to remove the duplicate entry of the China country. [Modified by: Saurabh; Date: 12-01-2022]
                                    let countryPicklistValues = [{"label":"Select...","value":"","selected":true,"isDefault":true},{"label":"Afghanistan","value":"Afghanistan"},{"label":"Albania","value":"Albania"},{"label":"Algeria","value":"Algeria"},{"label":"American Samoa","value":"American Samoa"},{"label":"Andorra","value":"Andorra"},{"label":"Angola","value":"Angola"},{"label":"Anguilla","value":"Anguilla"},{"label":"Antigua and Barbuda","value":"Antigua and Barbuda"},{"label":"Argentina","value":"Argentina"},{"label":"Armenia","value":"Armenia"},{"label":"Aruba","value":"Aruba"},{"label":"Australia","value":"Australia"},{"label":"Austria","value":"Austria"},{"label":"Azerbaijan","value":"Azerbaijan"},{"label":"Bahamas","value":"Bahamas"},{"label":"Bahrain","value":"Bahrain"},{"label":"Bangladesh","value":"Bangladesh"},{"label":"Barbados","value":"Barbados"},{"label":"Belarus","value":"Belarus"},{"label":"Belgium","value":"Belgium"},{"label":"Belize","value":"Belize"},{"label":"Benin","value":"Benin"},{"label":"Bermuda","value":"Bermuda"},{"label":"Bhutan","value":"Bhutan"},{"label":"Bolivia","value":"Bolivia"},{"label":"Bosnia and Herzegovina","value":"Bosnia and Herzegovina"},{"label":"Botswana","value":"Botswana"},{"label":"Bouvet Island","value":"Bouvet Island"},{"label":"Brazil","value":"Brazil"},{"label":"British Indian Ocean Territory","value":"British Indian Ocean Territory"},{"label":"British Virgin Islands","value":"British Virgin Islands"},{"label":"Brunei","value":"Brunei"},{"label":"Bulgaria","value":"Bulgaria"},{"label":"Burkina Faso","value":"Burkina Faso"},{"label":"Burundi","value":"Burundi"},{"label":"Cambodia","value":"Cambodia"},{"label":"Cameroon","value":"Cameroon"},{"label":"Canada","value":"Canada"},{"label":"Cape Verde","value":"Cape Verde"},{"label":"Cayman Islands","value":"Cayman Islands"},{"label":"Central African Republic","value":"Central African Republic"},{"label":"Chad","value":"Chad"},{"label":"Chile","value":"Chile"},{"label":"China","value":"China"},{"label":"Christmas Island","value":"Christmas Island"},{"label":"Cocos (Keeling) Islands","value":"Cocos (Keeling) Islands"},{"label":"Colombia","value":"Colombia"},{"label":"Comoros","value":"Comoros"},{"label":"Congo","value":"Congo"},{"label":"Cook Islands","value":"Cook Islands"},{"label":"Costa Rica","value":"Costa Rica"},{"label":"Croatia","value":"Croatia"},{"label":"Cuba","value":"Cuba"},{"label":"Cyprus","value":"Cyprus"},{"label":"Czech Republic","value":"Czech Republic"},{"label":"C\u00f4te d'Ivoire","value":"C\u00f4te d'Ivoire"},{"label":"Democratic Republic of the Congo","value":"Democratic Republic of the Congo"},{"label":"Denmark","value":"Denmark"},{"label":"Djibouti","value":"Djibouti"},{"label":"Dominica","value":"Dominica"},{"label":"Dominican Republic","value":"Dominican Republic"},{"label":"Ecuador","value":"Ecuador"},{"label":"Egypt","value":"Egypt"},{"label":"El Salvador","value":"El Salvador"},{"label":"Equatorial Guinea","value":"Equatorial Guinea"},{"label":"Eritrea","value":"Eritrea"},{"label":"Estonia","value":"Estonia"},{"label":"Ethiopia","value":"Ethiopia"},{"label":"Falkland Islands","value":"Falkland Islands"},{"label":"Faroe Islands","value":"Faroe Islands"},{"label":"Fiji Islands","value":"Fiji Islands"},{"label":"Finland","value":"Finland"},{"label":"France","value":"France"},{"label":"French Guiana","value":"French Guiana"},{"label":"French Polynesia","value":"French Polynesia"},{"label":"French Southern Territories","value":"French Southern Territories"},{"label":"Gabon","value":"Gabon"},{"label":"Gambia","value":"Gambia"},{"label":"Georgia","value":"Georgia"},{"label":"Germany","value":"Germany"},{"label":"Ghana","value":"Ghana"},{"label":"Gibraltar","value":"Gibraltar"},{"label":"Greece","value":"Greece"},{"label":"Greenland","value":"Greenland"},{"label":"Grenad","value":"Grenad"},{"label":"Guadeloupe","value":"Guadeloupe"},{"label":"Guam","value":"Guam"},{"label":"Guatemala","value":"Guatemala"},{"label":"Guinea","value":"Guinea"},{"label":"Guinea-Bissau","value":"Guinea-Bissau"},{"label":"Guyana","value":"Guyana"},{"label":"Haiti","value":"Haiti"},{"label":"Heard Island and McDonald Islands","value":"Heard Island and McDonald Islands"},{"label":"Honduras","value":"Honduras"},{"label":"Hong Kong","value":"Hong Kong"},{"label":"Hungary","value":"Hungary"},{"label":"Iceland","value":"Iceland"},{"label":"India","value":"India"},{"label":"Indonesia","value":"Indonesia"},{"label":"Iran","value":"Iran"},{"label":"Iraq","value":"Iraq"},{"label":"Ireland","value":"Ireland"},{"label":"Israel","value":"Israel"},{"label":"Italy","value":"Italy"},{"label":"Jamaica","value":"Jamaica"},{"label":"Japan","value":"Japan"},{"label":"Jordan","value":"Jordan"},{"label":"Kazakhstan","value":"Kazakhstan"},{"label":"Kenya","value":"Kenya"},{"label":"Kiribati","value":"Kiribati"},{"label":"Kuwait","value":"Kuwait"},{"label":"Kyrgyzstan","value":"Kyrgyzstan"},{"label":"Laos","value":"Laos"},{"label":"Latvia","value":"Latvia"},{"label":"Lebanon","value":"Lebanon"},{"label":"Lesotho","value":"Lesotho"},{"label":"Liberia","value":"Liberia"},{"label":"Libya","value":"Libya"},{"label":"Liechtenstein","value":"Liechtenstein"},{"label":"Lithuania","value":"Lithuania"},{"label":"Luxembourg","value":"Luxembourg"},{"label":"Macao S.A.R.","value":"Macao S.A.R."},{"label":"Macedonia","value":"Macedonia"},{"label":"Madagascar","value":"Madagascar"},{"label":"Malawi","value":"Malawi"},{"label":"Malaysia","value":"Malaysia"},{"label":"Maldives","value":"Maldives"},{"label":"Mali","value":"Mali"},{"label":"Malta","value":"Malta"},{"label":"Marshall Islands","value":"Marshall Islands"},{"label":"Martinique","value":"Martinique"},{"label":"Mauritania","value":"Mauritania"},{"label":"Mauritius","value":"Mauritius"},{"label":"Mayotte","value":"Mayotte"},{"label":"Mexico","value":"Mexico"},{"label":"Micronesia","value":"Micronesia"},{"label":"Moldova","value":"Moldova"},{"label":"Monaco","value":"Monaco"},{"label":"Mongolia","value":"Mongolia"},{"label":"Montserrat","value":"Montserrat"},{"label":"Morocco","value":"Morocco"},{"label":"Mozambique","value":"Mozambique"},{"label":"Myanmar","value":"Myanmar"},{"label":"Namibia","value":"Namibia"},{"label":"Nauru","value":"Nauru"},{"label":"Nepal","value":"Nepal"},{"label":"Netherlands","value":"Netherlands"},{"label":"Netherlands Antilles","value":"Netherlands Antilles"},{"label":"New Caledonia","value":"New Caledonia"},{"label":"New Zealand","value":"New Zealand"},{"label":"Nicaragua","value":"Nicaragua"},{"label":"Niger","value":"Niger"},{"label":"Nigeria","value":"Nigeria"},{"label":"Niue","value":"Niue"},{"label":"Norfolk Island","value":"Norfolk Island"},{"label":"North Korea","value":"North Korea"},{"label":"Northern Mariana Islands","value":"Northern Mariana Islands"},{"label":"Norway","value":"Norway"},{"label":"Oman","value":"Oman"},{"label":"Pakistan","value":"Pakistan"},{"label":"Palau","value":"Palau"},{"label":"Palestinian Territory","value":"Palestinian Territory"},{"label":"Panama","value":"Panama"},{"label":"Papua New Guinea","value":"Papua New Guinea"},{"label":"Paraguay","value":"Paraguay"},{"label":"Peru","value":"Peru"},{"label":"Philippines","value":"Philippines"},{"label":"Pitcairn","value":"Pitcairn"},{"label":"Poland","value":"Poland"},{"label":"Portugal","value":"Portugal"},{"label":"Puerto Rico","value":"Puerto Rico"},{"label":"Qatar","value":"Qatar"},{"label":"Reunion","value":"Reunion"},{"label":"Romania","value":"Romania"},{"label":"Russian Federation","value":"Russian Federation"},{"label":"Rwanda","value":"Rwanda"},{"label":"Saint Helena","value":"Saint Helena"},{"label":"Saint Kitts","value":"Saint Kitts"},{"label":"Saint Lucia","value":"Saint Lucia"},{"label":"Saint Pierre and Miquelon","value":"Saint Pierre and Miquelon"},{"label":"Saint Vincent and the Grenadines","value":"Saint Vincent and the Grenadines"},{"label":"Samoa","value":"Samoa"},{"label":"San Marino","value":"San Marino"},{"label":"Sao Tome and Principe","value":"Sao Tome and Principe"},{"label":"Saudi Arabi","value":"Saudi Arabi"},{"label":"Senegal","value":"Senegal"},{"label":"Serbia","value":"Serbia"},{"label":"Seychelles","value":"Seychelles"},{"label":"Sierra Leone","value":"Sierra Leone"},{"label":"Singapore","value":"Singapore"},{"label":"Slovakia","value":"Slovakia"},{"label":"Slovenia","value":"Slovenia"},{"label":"Solomon Islands","value":"Solomon Islands"},
                                                {"label":"Somalia","value":"Somalia"},{"label":"South Africa","value":"South Africa"},{"label":"South Korea","value":"South Korea"},{"label":"Spain","value":"Spain"},{"label":"Sri Lanka","value":"Sri Lanka"},{"label":"Sudan","value":"Sudan"},{"label":"Suriname","value":"Suriname"},{"label":"Svalbard and Jan Mayen","value":"Svalbard and Jan Mayen"},{"label":"Sweden","value":"Sweden"},{"label":"Switzerland","value":"Switzerland"},{"label":"Syria","value":"Syria"},{"label":"Taiwan","value":"Taiwan"},{"label":"Tajikistan","value":"Tajikistan"},{"label":"Tanzania","value":"Tanzania"},{"label":"Thailand","value":"Thailand"},{"label":"Timor-Leste","value":"Timor-Leste"},{"label":"Togo","value":"Togo"},{"label":"Tokelau","value":"Tokelau"},{"label":"Tonga","value":"Tonga"},{"label":"Trinidad and Tobago","value":"Trinidad and Tobago"},{"label":"Tunisia","value":"Tunisia"},{"label":"Turkey","value":"Turkey"},{"label":"Turkmenistan","value":"Turkmenistan"},{"label":"Turks and Caicos Islands","value":"Turks and Caicos Islands"},{"label":"Tuvalu","value":"Tuvalu"},{"label":"U.S. Virgin Islands","value":"U.S. Virgin Islands"},{"label":"Uganda","value":"Uganda"},{"label":"Ukraine","value":"Ukraine"},{"label":"United Arab Emirates","value":"United Arab Emirates"},{"label":"United Kingdom","value":"United Kingdom"},{"label":"USA","value":"USA"},{"label":"United States Minor Outlying Islands","value":"United States Minor Outlying Islands"},{"label":"Uruguay","value":"Uruguay"},{"label":"Uzbekistan","value":"Uzbekistan"},{"label":"Vanuatu","value":"Vanuatu"},{"label":"Vatican","value":"Vatican"},{"label":"Venezuela","value":"Venezuela"},{"label":"Vietnam","value":"Vietnam"},{"label":"Western Sahara","value":"Western Sahara"},{"label":"Yemen","value":"Yemen"},{"label":"Zambia","value":"Zambia"},{"label":"Zimbabwe","value":"Zimbabwe"}];
                                    //List of EU countries (Used only for the "webMethods Service Designer download" form) [Added by Ajroddin; Date: 14-10-2021]
                                    
                                    // Remove EU countries( "webMethods Service Designer download" form display all countries) [Added by Ajroddin; Date: 11-01-2022]
                                    //let euCountryPicklistValues = [{"label":"Select...","value":"","selected":true,"isDefault":true},{"label":"Austria","value":"Austria"},{"label":"Belgium","value":"Belgium"},{"label":"Bulgaria","value":"Bulgaria"},{"label":"Croatia","value":"Croatia"},{"label":"Cyprus","value":"Cyprus"},{"label":"Czechia","value":"Czechia"},{"label":"Denmark","value":"Denmark"},{"label":"Estonia","value":"Estonia"},{"label":"Finland","value":"Finland"},{"label":"France","value":"France"},{"label":"Germany","value":"Germany"},{"label":"Greece","value":"Greece"},{"label":"Hungary","value":"Hungary"},{"label":"Ireland","value":"Ireland"},{"label":"Italy","value":"Italy"},{"label":"Latvia","value":"Latvia"},{"label":"Lithuania","value":"Lithuania"},{"label":"Luxembourg","value":"Luxembourg"},{"label":"Malta","value":"Malta"},{"label":"Netherlands","value":"Netherlands"},{"label":"Poland","value":"Poland"},{"label":"Portugal","value":"Portugal"},{"label":"Romania","value":"Romania"},{"label":"Slovakia","value":"Slovakia"},{"label":"Slovenia","value":"Slovenia"},{"label":"Spain","value":"Spain"},{"label":"Sweden","value":"Sweden"}]                                   
                                    
                                    //List of State / Province
                                    let stateOptions = ["Select State","International","AK","AL","AR","AZ","CA","CO","CT","DE","FL","GA","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VA","VT","WA","WI","WV"];
                                    let state_provincePicklistValues = [{"label":"Select...","value":"","selected":true,"isDefault":true},{"label":"Alabama","value":"AL"},{"label":"Alaska","value":"AK"},{"label":"Arizona","value":"AZ"},{"label":"Arkansas","value":"AR"},{"label":"California","value":"CA"},{"label":"Colorado","value":"CO"},{"label":"Connecticut","value":"CT"},{"label":"Delaware","value":"DE"},{"label":"Florida","value":"FL"},{"label":"Georgia","value":"GA"},{"label":"Hawaii","value":"HI"},{"label":"Idaho","value":"ID"},{"label":"Illinois","value":"IL"},{"label":"Indiana","value":"IN"},{"label":"Iowa","value":"IA"},{"label":"Kansas","value":"KS"},{"label":"Kentucky","value":"KY"},{"label":"Louisiana","value":"LA"},{"label":"Maine","value":"ME"},{"label":"Maryland","value":"MD"},{"label":"Massachusetts","value":"MA"},{"label":"Michigan","value":"MI"},{"label":"Minnesota","value":"MN"},{"label":"Mississippi","value":"MS"},{"label":"Missouri","value":"MO"},{"label":"Montana","value":"MT"},{"label":"Nebraska","value":"NE"},{"label":"Nevada","value":"NV"},{"label":"New Hampshire","value":"NH"},{"label":"New Jersey","value":"NJ"},{"label":"New Mexico","value":"NM"},{"label":"New York","value":"NY"},{"label":"North Carolina","value":"NC"},{"label":"North Dakota","value":"ND"},{"label":"Ohio","value":"OH"},{"label":"Oklahoma","value":"OK"},{"label":"Oregon","value":"OR"},{"label":"Pennsylvania","value":"PA"},{"label":"Rhode Island","value":"RI"},{"label":"South Carolina","value":"SC"},{"label":"South Dakota","value":"SD"},{"label":"Tennessee","value":"TN"},{"label":"Texas","value":"TX"},{"label":"Utah","value":"UT"},{"label":"Vermont","value":"VT"},{"label":"Virginia","value":"VA"},{"label":"Washington","value":"WA"},{"label":"West Virgina","value":"WV"},{"label":"Wisconsin","value":"WI"},{"label":"Wyoming","value":"WY"},{"label":"Alberta","value":"AB"},{"label":"British Columbia","value":"BC"},{"label":"Manitoba","value":"MB"},{"label":"New Brunswick","value":"NB"},{"label":"Newfoundland & Labrador","value":"NL"},{"label":"Nova Scotia","value":"NS"},{"label":"Ontario","value":"ON"},{"label":"Quebec","value":"QC"},{"label":"Prince Edward Island","value":"PE"},{"label":"Saskatchewan","value":"SK"}];
                                    let statePicklistValues = [{"label":"Please Select","value":""},{"label":"Alabama","value":"AL"},{"label":"Alaska","value":"AK"},{"label":"Arizona","value":"AZ"},{"label":"Arkansas","value":"AR"},{"label":"California","value":"CA"},{"label":"Colorado","value":"CO"},{"label":"Connecticut","value":"CT"},{"label":"Delaware","value":"DE"},{"label":"Florida","value":"FL"},{"label":"Georgia","value":"GA"},{"label":"Hawaii","value":"HI"},{"label":"Idaho","value":"ID"},{"label":"Illinois","value":"IL"},{"label":"Indiana","value":"IN"},{"label":"Iowa","value":"IA"},{"label":"Kansas","value":"KS"},{"label":"Kentucky","value":"KY"},{"label":"Louisiana","value":"LA"},{"label":"Maine","value":"ME"},{"label":"Maryland","value":"MD"},{"label":"Massachusetts","value":"MA"},{"label":"Michigan","value":"MI"},{"label":"Minnesota","value":"MN"},{"label":"Mississippi","value":"MS"},{"label":"Missouri","value":"MO"},{"label":"Montana","value":"MT"},{"label":"Nebraska","value":"NE"},{"label":"Nevada","value":"NV"},{"label":"New Hampshire","value":"NH"},{"label":"New Jersey","value":"NJ"},{"label":"New Mexico","value":"NM"},{"label":"New York","value":"NY"},{"label":"North Carolina","value":"NC"},{"label":"North Dakota","value":"ND"},{"label":"Ohio","value":"OH"},{"label":"Oklahoma","value":"OK"},{"label":"Oregon","value":"OR"},{"label":"Pennsylvania","value":"PA"},{"label":"Rhode Island","value":"RI"},{"label":"South Carolina","value":"SC"},{"label":"South Dakota","value":"SD"},{"label":"Tennessee","value":"TN"},{"label":"Texas","value":"TX"},{"label":"Utah","value":"UT"},{"label":"Vermont","value":"VT"},{"label":"Virginia","value":"VA"},{"label":"Washington","value":"WA"},{"label":"West Virgina","value":"WV"},{"label":"Wisconsin","value":"WI"},{"label":"Wyoming","value":"WY"}]; 
                                    let provincePicklistValues = [{"label":"Please Select","value":""},{"label":"Alberta","value":"AB"},{"label":"British Columbia","value":"BC"},{"label":"Manitoba","value":"MB"},{"label":"New Brunswick","value":"NB"},{"label":"Newfoundland & Labrador","value":"NL"},{"label":"Nova Scotia","value":"NS"},{"label":"Ontario","value":"ON"},{"label":"Quebec","value":"QC"},{"label":"Prince Edward Island","value":"PE"},{"label":"Saskatchewan","value":"SK"}];
                                    let yesNoOptions = ["Please select", "Yes", "No"];
                                    //List of Salutations
                                    let salutationOptions = ["Please Select","Mr.", "Mrs.", "Ms.", "Dr.", "Prof."];
                                    let jobRoleOptions = ["Please Select", "Business / IT Analyst", "Buyer", "CEO / CFO / COO", "CIO / CTO", "Compliance & Risk Officer", "Developer", "Digital Strategy / Innovation Leader", "Director / Vice President of IT", "IT / Enterprise Architect", "IT Consultant / Software Engineer", "IT Manager / IT Project Manager", "Omni-Channel Retail Leader", "Other", "Sales Manager", "Supply Chain Innovation Leader"];
                                    
                                    let state_province = "";
                                    //Set the State/Province based on selected Country.
                                    if(currentuserCountry && currentuserCountry.toUpperCase() == 'USA'){
                                        state_province = currentuserState;
                                    }else if(currentuserCountry && currentuserCountry.toUpperCase() == 'CANADA'){
                                        state_province = currentuserProvince;
                                    }
                                    
                                    let autofillDownloadFormFields = function() {
                                        let firstNameInput = document.querySelector('input#FirstName')
                                        if(firstNameInput) {
                                            firstNameInput.value = currentuserFirstName;
                                        }
                                        let lastNameInput = document.querySelector('input#LastName');
                                        if(lastNameInput) {
                                            lastNameInput.value = currentuserLastName
                                        }
                                        let emailInput = document.querySelector('input#Email');
                                        if(emailInput) {
                                            emailInput.value = currentuserEmail;
                                        }
                                        let countryInput = document.querySelector('select#Address_Visit_Country__c');
                                        if(countryInput) {
                                            countryInput.value = currentuserCountry;
                                            countryInput.dispatchEvent(new Event('change'));
                                        }
                                        let StateProvinceInput = document.querySelector('select#Address_Visit_State__c');
                                        if(StateProvinceInput){
                                            StateProvinceInput.value = state_province;
                                        }
                                        let companyInput = document.querySelector('input#Company');
                                        if(companyInput) {
                                            companyInput.value = currentuserCompany;
                                        }
                                        let jobTitleInput = document.querySelector('input#Title');
                                        if(jobTitleInput) {
                                            jobTitleInput.value = currentuserJob;
                                        }
                                    }

                                    switch(attrs.marketoFormId){
                                        case "mktoForm_12281":
                                            if(!document.querySelector('form#mktoForm_12281')){
                                                /*
                                                * Date: 23-04-2021
                                                * Below Script loads the "webMethods Integration download form" from the Marketo. This script is copied from the Marketo page: "https://info.softwareag.com/webMthodsApplicationIntegrationDownload.html"
                                                */
                                                (function (){
                                                    if(!window.MktoForms2) {
                                                        attrs.forms2MinJs.onload = function() {
                                                            var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 12281, autofillDownloadFormFields);  
                                                            //Remove spinner after form is displayed
                                                            removeFormSpinner(); 
                                                        };
                                                    }else{
                                                        var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 12281, autofillDownloadFormFields);  
                                                        //Remove spinner after form is displayed
                                                        removeFormSpinner();
                                                    }
                                                
                                                })();
                                            }
    
                                            break;
                                            
                                        case "mktoForm_12282":
                                        
                                            if(!document.querySelector('form#mktoForm_12282')){
                                                /*
                                                * Date: 23-04-2021
                                                * Below Script loads the "Adabas & Natural download form" from the Marketo. This script is copied from the Marketo page: "https://info.softwareag.com/ada_nat_docker.html"
                                                */
                                                (function (){
                                                    if(!window.MktoForms2) {
                                                        attrs.forms2MinJs.onload = function() {
                                                                var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 12282, autofillDownloadFormFields);
                                                                //Remove spinner after form is displayed
                                                                removeFormSpinner();  
                                                        };
                                                    }else{
                                                        var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 12282, autofillDownloadFormFields);
                                                        //Remove spinner after form is displayed
                                                        removeFormSpinner();
                                                    }

                                                })();
                                            }
                                            
                                            break;
                                            
                                        case "mktoForm_8655":
                                            if(!document.querySelector('form#mktoForm_8655')){
                                                /*
                                                * Date: 23-04-2021
                                                * - Below Script loads the "webMethods Service Designer download form" from the Marketo. This script is copied from the Marketo page: "https://info.softwareag.com/019-webMethods-Service-Designer_lpp.html"
                                                * Modified on 14-10-2021
                                                * - Set EU countries in the dropdown list of a country field. Remove the auto-fill functionality for the Country field. [Added by Ajroddin; Date: 14-10-2021]
                                                * - Set all countries in the dropdown list of a country field. [Added by Ajroddin; Date: 11-01-2022]
                                                */ 
                                                
                                                (function (){
                                                    if(!window.MktoForms2) {
                                                        attrs.forms2MinJs.onload = function() {
                                                                var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 8655, autofillDownloadFormFields);       
                                                            //Remove spinner after form is displayed
                                                                removeFormSpinner();   
                                                        };
                                                    }else{
                                                        var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 8655, autofillDownloadFormFields);       
                                                        //Remove spinner after form is displayed
                                                            removeFormSpinner(); 
                                                    }
							
                                                })();
                                            }
    
                                            break;
                                        
                                        case "mktoForm_12313":
                                            if(!document.querySelector('form#mktoForm_12313')){
                                                /*
                                                * Date: 23-04-2021
                                                * Below Script loads the "webMethods.io Connector Builder.Registration download form" from the Marketo. This script is copied from the Marketo page: "info.softwareag.com/002a-TECHcommunity-webMethods.ioConnectorBuilder_DemoLP.html"
                                                */
                                                (function (){
                                                    if(!window.MktoForms2) {
                                                        attrs.forms2MinJs.onload = function() {
                                                                var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 12313, autofillDownloadFormFields);    
                                                        //Remove spinner after form is displayed
                                                            removeFormSpinner();  
                                                        };
                                                    }else{
                                                        var form = MktoForms2.loadForm("//info.softwareag.com", "858-DJP-749", 12313, autofillDownloadFormFields);    
                                                        //Remove spinner after form is displayed
                                                            removeFormSpinner(); 
                                                    }
                                                    
                                                })();       
                                            }
                                        
                                        default:
                                    }

                                } catch (e) {
                                    console.error(e);
                                } finally {
                                    //Do nothing
                                }
                            }
                            
                        },
                        async: false
                        
                    });
                } 
                //If User is not Logged in then redirect to Signup page.
                else{
                    DiscourseURL.routeToUrl('/signup');
                }
            }
            return result;
	 }
    });
    
    </script>
